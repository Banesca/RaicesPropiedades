<div class="articulos-container">
  <h3 id="resultados-busqueda">RESULTADOS DE BUSQUEDA</h3>
  <div class="articulos-infoFiltro grid-container">
    <div class="filters">
      <div class="articulos-infotitle">
        {{ verifyStringOrObject() }}
      </div>
    </div>
    <span (click)="goBack()" class="goHome">Volver Atrás</span>
  </div>
  <div class="articulos-content">
    <div class="articulos-filter" *ngIf="!propiedadesInPromise">
      <div class="articulos-filterTitle">{{articulos.length}} resultados</div>

      <div class="articulos-filterSections">
        <mat-chip-list #chipList aria-label="Filtro Seleccionado" *ngIf="filterData">
          <!--CHIP TipoOperaion-->
          <mat-chip removable="true" (removed)="removeChip('TipoOperaion')"
            *ngIf="filterData.TipoOperaion && filterData.TipoOperaion.idTipoOperaion">
            <span>{{filterData.TipoOperaion.descripcion}}</span>
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP TipoPropiedad-->
          <mat-chip removable="true" (removed)="removeChip('TipoPropiedad')"
            *ngIf="filterData.TipoPropiedad && filterData.TipoPropiedad.idTipoPropiedad">
            <span></span> {{filterData.TipoPropiedad.descripcion}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Moneda-->
          <mat-chip removable="true" (removed)="removeChip('Moneda')"
            *ngIf="filterData.Moneda && filterData.Moneda.idMonedas">
            <span></span> {{filterData.Moneda.moneda}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Mont. Max-->
          <mat-chip removable="true" (removed)="removeChip('montoMinimo')"
            *ngIf="filterData.montoMinimo && filterData.montoMinimo != 'Indistinto'">
            <span></span> Min {{filterData.montoMinimo}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Mont. Min-->
          <mat-chip removable="true" (removed)="removeChip('montoMaximo')"
            *ngIf="filterData.montoMaximo && filterData.montoMaximo != 'Indistinto'">
            <span></span> Max {{filterData.montoMaximo}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Provincia-->
          <mat-chip removable="true" (removed)="removeChip('Provincia')"
            *ngIf="filterData.Provincia && filterData.Provincia.id">
            <span></span> {{filterData.Provincia.nombre}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Partido-->
          <mat-chip removable="true" (removed)="removeChip('Partido')"
            *ngIf="filterData.Partido && filterData.Partido.id">
            <span></span> {{filterData.Partido.nombre}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Localidad-->
          <mat-chip removable="true" (removed)="removeChip('Localidad')"
            *ngIf="filterData.Localidad && filterData.Localidad.id">
            <span>{{filterData.Localidad.nombre}}</span>
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <!--CHIP Barrio-->
          <mat-chip removable="true" (removed)="removeChip('Barrio')" *ngIf="filterData.Barrio && filterData.Barrio.id">
            <span>{{filterData.Barrio.nombre}}</span>
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

        </mat-chip-list>
      </div>
      <!--
      <div class="articulos-relevante">
        <div class="title">
          Ordenar por Publicaciones
        </div>
        <div class="textContent">
          mas relevantes
          <i class="material-icons icon">
            keyboard_arrow_down
          </i>
        </div>
      </div>
      -->
      <div class="articulos-relevante"
        *ngIf="(!filterData.TipoOperaion || !filterData.TipoOperaion.idTipoOperaion) && arbol.TipoOperaion && arbol.TipoOperaion.length">
        <div class="title">
          Tipo Operación
        </div>
        <div class="textContent2">
          <div *ngFor="let item of arbol.TipoOperaion" (click)="setFilter('TipoOperaion', item.tipo_opeacion)">
            <span *ngIf="item.fk_idTipoOperaion">{{item.tipo_opeacion.descripcion}}</span>
          </div>
        </div>
      </div>

      <div class="articulos-relevante"
        *ngIf="(!filterData.TipoPropiedad || !filterData.TipoPropiedad.idTipoPropiedad) && arbol.TipoPropiedad && arbol.TipoPropiedad.length">
        <div class="title">
          Edificación
        </div>
        <div class="textContent2">
          <div *ngFor="let item of arbol.TipoPropiedad" (click)="setFilter('TipoPropiedad', item.tipo_propiedad)">
            <span *ngIf="item.fk_idTipoPropiedad">{{item.tipo_propiedad.descripcion}}</span>
          </div>
        </div>
      </div>

      <div class="articulos-relevante"
        *ngIf="(!filterData.Moneda || !filterData.Moneda.idMonedas) && arbol.TipoMonedas && arbol.TipoMonedas.length">
        <div class="title">
          Moneda
        </div>
        <div class="textContent2">
          <div *ngFor="let item of arbol.TipoMonedas" (click)="setFilter('Moneda', item.tipo_moneda)">
            <span *ngIf="item.fk_idMonedas">{{item.tipo_moneda.moneda}}</span>
          </div>
        </div>
      </div>

      <div class="articulos-relevante">
        <div class="textContent">
          <div class="textContent">
            <div ngbDropdown style="display: flex">
              <input type="button" class="btn search-dropdown btn-block" id="dropdownBasic1" [value]="selectedMaximo"
                ngbDropdownToggle />
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <input type="button" *ngFor="let monto of montos" ngbDropdownItem
                  (click)="setFilter('montoMaximo', monto)" [value]="monto" />
              </div>
              <i class="material-icons icon" ngbDropdownToggle style="margin: auto">
              </i>
            </div>
          </div>

          <div class="textContent">
            <div ngbDropdown style="display: flex">
              <input type="button" class="btn search-dropdown btn-block" id="dropdownBasic1" [value]="selectedMinimo"
                ngbDropdownToggle />
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <input type="button" *ngFor="let monto of montos" ngbDropdownItem
                  (click)="setFilter('montoMinimo', monto)" [value]="monto" />
              </div>
              <i class="material-icons icon" ngbDropdownToggle style="margin: auto">
              </i>
            </div>
          </div>
        </div>
      </div>
      <!--
      <div class="articulos-relevante">
        <div class="title">
          Mas Especificaciones
        </div>
        <div class="textContent">
          alberca(10)
        </div>
      </div>
      -->
    </div>

    <!-- inmuebles -->
    <div class="articulos-article">
      <div class="row" style="width: 100%" *ngIf="propiedadesInPromise">
        <div class="col-lg-12 d-flex justify-content-center my-2">
          <div class="spinner-border main-spinner m-5" role="status" style="color: #39211F; width: 6rem; height: 6rem;">
            <span class="sr-only">Cargando...</span>
          </div>
        </div>
      </div>

      <div class="row" *ngIf="(!articulos || articulos.length <=0) && !propiedadesInPromise" style="width: 100%">
        <div class="col" style="text-align: center">
          <h3>
            No existen productos que cumplan con las propiedades del buscador.
          </h3>
        </div>
      </div>

      <div class="row" style="padding-left: 20px; width: 100%" *ngIf="!propiedadesInPromise">
        <div class="col-sm-6 col-md-6 col-lg-4 col-xl-4 " *ngFor="let item of articulos" [routerLink]="[baseUrl, item.idPropiedad]" (click)="onClickPublicacion()">
          <div class="articulos-image">
            <img [src]="item.imagenes.imagen_para_galeria" [alt]="item.titulo" width="100%" height="250px"
              style="max-height: 250px;" onerror="this.src='assets/images/no_image_aviable.jpg'" />
          </div>
          <div class="articulos-precios">
            <div class="articulos-title2">
              {{item.precio | number:'1.2-2'}}
              <span *ngIf="item.tipo_moneda && item.tipo_moneda.idMonedas && item.tipo_moneda.idMonedas == 1">
                $ARS
              </span>
              <span *ngIf="item.tipo_moneda && item.tipo_moneda.idMonedas && item.tipo_moneda.idMonedas == 2">
                $USD
              </span>
              <span *ngIf="item.tipo_moneda && item.tipo_moneda.idMonedas && item.tipo_moneda.idMonedas == 3">
                $UYU
              </span>
            </div>
            <div class="articulos-subtitle">
              {{item.titulo}}
            </div>
          </div>

          <div class="articulos-info">
            <div class="articulos-subtitle3">
              <span style="font-size: 15px">
                <b>{{item.tipo_propiedad.descripcion}}</b>
              </span> <br>
              En {{item.tipo_opeacion.descripcion}}

            </div>
            <div class="articulos-subtitle3">
              <span *ngIf="item.sub_barrio && item.sub_barrio.nombre">
                {{item.sub_barrio.nombre}} -
              </span>
              <span *ngIf="item.barrio && item.barrio.nombre">
                {{item.barrio.nombre}} -
              </span>
              <span *ngIf="item.localidad && item.localidad.nombre">
                {{item.localidad.nombre}} -
              </span>
              <span *ngIf="item.partido && item.partido.nombre">
                {{item.partido.nombre}} -
              </span>
              <span *ngIf="item.provincia && item.provincia.nombre">
                {{item.provincia.nombre}}
              </span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>